{"slots":{"0":{"name":"Detector","type":{"events":[],"methods":[]}},"1":{"name":"Db","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"if not Db.hasKey(id) then\n    Db.setStringValue(id, system.getPlayerName(id).. '~'..system.getUtcTime()..'~1')\nelse\n    local value = Split(Db.getStringValue(id),'~')\n    local visitNum = tonumber(value[3]) + 1\n    Db.setStringValue(id, system.getPlayerName(id).. '~'..system.getUtcTime()..'~'..visitNum)\nend","filter":{"args":[{"variable":"*"}],"signature":"onEnter(id)","slotKey":"0"},"key":"0"},{"code":"for k,v in ipairs(Db.getKeyList()) do\n   local value = Split(Db.getStringValue(v),'~')\n   system.print(value[1]..' | '..GetTimeString(tonumber(value[2]))..' | '..value[3])\nend","filter":{"args":[{"value":"option1"}],"signature":"onActionStart(action)","slotKey":"-4"},"key":"1"},{"code":"Db.clear()\nsystem.print('Databank Cleared!')","filter":{"args":[{"value":"option9"}],"signature":"onActionStart(action)","slotKey":"-4"},"key":"2"},{"code":"function GetTimeString(t)\n   local allseconds = system.getUtcTime() - math.floor(t)\n   local daysPassed = math.floor(allseconds / 86400)\n   local daySeconds = math.floor(allseconds % 86400)\n   local hoursPassed = math.floor(daySeconds / 3600)\n   return \"Days:\"..string.format(\"%003d\", daysPassed) .. \" Hours:\" .. string.format(\"%02d\", hoursPassed)\nend\n\nfunction Split(s, delimiter)\n    result = {};\n    for match in (s..delimiter):gmatch(\"(.-)\"..delimiter) do\n        table.insert(result, match);\n    end\n    return result;\nend","filter":{"args":[],"signature":"onStart()","slotKey":"-5"},"key":"3"}],"methods":[],"events":[]}
